@{
    ViewBag.Title = "index";
    Layout = "~/Areas/AdminArea/Views/Shared/_LayoutPage1.cshtml";
}

<div id="dashboard-content">
    <div class="content-section-header">Bảng Điều Khiển</div>
    <div class="stat-cards">
        <div class="stat-card">
            <h3>
                <i class="fas fa-users icon"></i>
                Tổng Khách Hàng
            </h3>
            <p>@ViewBag.NumbersOfCustomer Khách hàng</p>
        </div>
        <div class="stat-card">
            <h3>
                <i class="fas fa-box icon"></i>
                Tổng Sản Phẩm
            </h3>
            <p>@ViewBag.NumbersOfProduct sản phẩm</p>
        </div>
        <div class="stat-card">
            <h3>
                <i class="fas fa-shopping-cart icon"></i>
                Tổng Đơn Hàng
            </h3>
            <p>@ViewBag.NumbersOfInvoice đơn hàng</p>
        </div>
        <div class="stat-card">
            <h3>
                <i class="fas fa-exclamation-triangle icon"></i>
                Sắp Hết Hàng
            </h3>
            <p>@ViewBag.almostOutOfStock sản phẩm</p>
        </div>
    </div>
    <div>
        <h3>Sản phẩm mới:</h3>
        <table class="order-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên sản phẩm</th>
                    <th>Ảnh</th>
                    <th> Giá tiền</th>
                    <th> Danh mục</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in (IEnumerable<BTL.Models.Product>)ViewData["products"])
                {
                    <tr>
                        <td class="center-clm">@Html.DisplayFor(modelItem => item.ProductID)</td>
                        <td style="width:30%">@Html.DisplayFor(modelItem => item.ProductName)</td>
                        <td class="center-clm">
                            @{
                                string imagePath = "";
                                switch (item.CategoryID)
                                {
                                    case 1:
                                        imagePath = $"~/Content/images/Áo nam/áo sơ mi/{item.URLPicture}";
                                        break;
                                    case 2:
                                        imagePath = $"~/Content/images/Áo nam/áo thun/{item.URLPicture}";
                                        break;
                                    case 3:
                                        imagePath = $"~/Content/images/Áo nam/áo polo/{item.URLPicture}";
                                        break;
                                    case 4:
                                        imagePath = $"~/Content/images/Áo nam/áo khoác/{item.URLPicture}";
                                        break;
                                    case 5:
                                        imagePath = $"~/Content/images/Áo nam/áo hoodie/{item.URLPicture}";
                                        break;
                                    case 6:
                                        imagePath = $"~/Content/images/Áo nam/áo len/{item.URLPicture}";
                                        break;
                                    case 7:
                                        imagePath = $"~/Content/images/Áo nam/áo vest/{item.URLPicture}";
                                        break;
                                    case 8:
                                        imagePath = $"~/Content/images/Áo nam/áo ghi lê/{item.URLPicture}";
                                        break;
                                    case 9:
                                        imagePath = $"~/Content/images/Quần nam/quần jeans/{item.URLPicture}";
                                        break;
                                    case 10:
                                        imagePath = $"~/Content/images/Quần nam/quần tây/{item.URLPicture}";
                                        break;
                                    case 11:
                                        imagePath = $"~/Content/images/Quần nam/quần kaki/{item.URLPicture}";
                                        break;
                                    case 12:
                                        imagePath = $"~/Content/images/Quần nam/quần jogger/{item.URLPicture}";
                                        break;
                                    case 13:
                                        imagePath = $"~/Content/images/Quần nam/quần short/{item.URLPicture}";
                                        break;
                                    case 14:
                                        imagePath = $"~/Content/images/Quần nam/quần lót/{item.URLPicture}";
                                        break;
                                    case 15:
                                        imagePath = $"~/Content/images/Phụ kiện/thắt lưng/{item.URLPicture}";
                                        break;
                                    case 16:
                                        imagePath = $"~/Content/images/Phụ kiện/ví da/{item.URLPicture}";
                                        break;
                                    case 17:
                                        imagePath = $"~/Content/images/Phụ kiện/cà vạt/{item.URLPicture}";
                                        break;
                                    case 18:
                                        imagePath = $"~/Content/images/Phụ kiện/Nơ/{item.URLPicture}";
                                        break;
                                    case 19:
                                        imagePath = $"~/Content/images/Phụ kiện/vé nam/{item.URLPicture}";
                                        break;
                                    case 20:
                                        imagePath = $"~/Content/images/Phụ kiện/mũ nón/{item.URLPicture}";
                                        break;
                                    case 21:
                                        imagePath = $"~/Content/images/Phụ kiện/túi xách/{item.URLPicture}";
                                        break;
                                    case 22:
                                        imagePath = $"~/Content/images/Phụ kiện/mắt kính/{item.URLPicture}";
                                        break;
                                    case 23:
                                        imagePath = $"~/Content/images/Giày dép/giày/{item.URLPicture}";
                                        break;
                                    case 24:
                                        imagePath = $"~/Content/images/Giày dép/sandal/{item.URLPicture}";
                                        break;
                                    case 25:
                                        imagePath = $"~/Content/images/Giày dép/dép nam/{item.URLPicture}";
                                        break;
                                    default:
                                        imagePath = $"~/Content/images/Áo nam/default/{item.URLPicture}";
                                        break;
                                }
                            }
                            <img width="100" height="100" src="@Url.Content(imagePath)" alt="Product Image" />
                        </td>
                        <td class="center-clm">@String.Format("{0:N0} VND", item.Price)</td>
                        <td class="center-clm">@Html.DisplayFor(modelItem => item.Category.CategoryName)</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div>
        <h3>Khách hàng mới</h3>
        <table class="order-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên Khách Hàng</th>
                    <th>Ngày sinh</th>
                    <th>Số điện thoại</th>
                    <th>Email</th>
                    <th>Địa chỉ</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in (IEnumerable<BTL.Models.Customer>)ViewData["newCustomers"])
                {
                    <tr>
                        <td class="center-clm">@Html.DisplayFor(modelItem => item.CustomerID)</td>
                        <td>@Html.DisplayFor(modelItem => item.FullName)</td>
                        <td class="center-clm">@item.BirthDate.ToString("dd/MM/yyyy")</td>
                        <td class="center-clm">@Html.DisplayFor(modelItem => item.PhoneNumber)</td>
                        <td>@Html.DisplayFor(modelItem => item.Email)</td>
                        <td>@Html.DisplayFor(modelItem => item.Address)</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div>
        <h3>Thống kê lượng khách hàng đăng ký tài khoản</h3>
        <canvas id="newCustomersChart" class="chart-placeholder"></canvas>
    </div>

    <div>
        <h3>Thống kê 6 tháng doanh thu</h3>
        <canvas id="revenueChart" class="chart-placeholder"></canvas>
    </div>
</div>

<script>
        const newCustomersJanuary = @ViewBag.newCustomersJanuary;
        const newCustomersFebruary = @ViewBag.newCustomersFebruary;
        const newCustomersMarch = @ViewBag.newCustomersMarch;
        const newCustomersApril = @ViewBag.newCustomersApril;
        const newCustomersMay = @ViewBag.newCustomersMay;
        const newCustomersJune = @ViewBag.newCustomersJune;
        const newCustomersJuly = @ViewBag.newCustomersJuly;
        const newCustomersAugust = @ViewBag.newCustomersAugust;
        const newCustomersSeptember = @ViewBag.newCustomersSeptember;
        const newCustomersOctober = @ViewBag.newCustomersOctober;
        const newCustomersNovember = @ViewBag.newCustomersNovember;
        const newCustomersDecember = @ViewBag.newCustomersDecember;
        const newCustomersCtx = document.getElementById('newCustomersChart').getContext('2d');
        const newCustomersChart = new Chart(newCustomersCtx, {
            type: 'line',
            data: {
                labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
                datasets: [{
                    label: 'Khách hàng mới',
                    data: [
                        newCustomersJanuary, newCustomersFebruary, newCustomersMarch, newCustomersApril,
                        newCustomersMay, newCustomersJune, newCustomersJuly, newCustomersAugust,
                        newCustomersSeptember, newCustomersOctober, newCustomersNovember, newCustomersDecember
                    ],
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        const revenueJanuary = @ViewBag.RevenueJanuary;
        const revenueFebruary = @ViewBag.RevenueFebruary;
        const revenueMarch = @ViewBag.RevenueMarch;
        const revenueApril = @ViewBag.RevenueApril;
        const revenueMay = @ViewBag.RevenueMay;
        const revenueJune = @ViewBag.RevenueJune;
        const revenueJuly = @ViewBag.RevenueJuly;
        const revenueAugust = @ViewBag.RevenueAugust;
        const revenueSeptember = @ViewBag.RevenueSeptember;
        const revenueOctober = @ViewBag.RevenueOctober;
        const revenueNovember = @ViewBag.RevenueNovember;
        const revenueDecember = @ViewBag.RevenueDecember;
        const revenueCtx = document.getElementById('revenueChart').getContext('2d');
        const revenueChart = new Chart(revenueCtx, {
            type: 'line',
            data: {
                labels: ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'],
                datasets: [{
                    label: 'Doanh thu',
                    data: [
                        revenueJanuary, revenueFebruary, revenueMarch, revenueApril,
                        revenueMay, revenueJune, revenueJuly, revenueAugust,
                        revenueSeptember, revenueOctober, revenueNovember, revenueDecember
                    ],
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderColor: 'rgba(255, 99, 132, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
</script>